<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Site Settings</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; }
        
        .header { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #20b2aa 100%); padding: 20px 60px; display: flex; align-items: center; justify-content: space-between; color: #fff; }
        .logo { font-size: 1.5em; font-weight: bold; }
        .admin-title { font-size: 1.8em; text-align: center; }
        .logout-btn { background: rgba(255,255,255,0.2); color: #fff; padding: 10px 20px; border: none; border-radius: 5px; text-decoration: none; transition: all 0.3s; }
        .logout-btn:hover { background: rgba(255,255,255,0.3); }
        
        .nav-bar { background: #34495e; padding: 15px 60px; }
        .nav-menu { display: flex; gap: 30px; }
        .nav-menu a { color: #ecf0f1; text-decoration: none; padding: 10px 15px; border-radius: 5px; transition: all 0.3s; }
        .nav-menu a:hover, .nav-menu a.active { background: #3498db; }
        
        .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; }
        .page-title { font-size: 2.2em; color: #2c3e50; margin-bottom: 30px; }
        
        .settings-grid { display: grid; grid-template-columns: 1fr; gap: 30px; }
        .settings-section { background: #fff; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden; }
        .section-header { background: #34495e; color: #fff; padding: 20px; }
        .section-title { font-size: 1.3em; font-weight: 600; }
        .section-description { font-size: 0.9em; opacity: 0.8; margin-top: 5px; }
        
        .section-content { padding: 30px; }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #2c3e50; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 1em; transition: border-color 0.3s; }
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus { outline: none; border-color: #3498db; }
        .form-group textarea { height: 120px; resize: vertical; }
        .form-group .help-text { font-size: 0.9em; color: #7f8c8d; margin-top: 5px; }
        
        .form-row { display: flex; gap: 20px; }
        .form-row .form-group { flex: 1; }
        
        .checkbox-group { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .checkbox-group input[type="checkbox"] { width: auto; margin: 0; }
        
        .btn { padding: 12px 30px; border: none; border-radius: 5px; font-size: 1em; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: #27ae60; color: #fff; }
        .btn-primary:hover { background: #229954; }
        .btn-secondary { background: #95a5a6; color: #fff; }
        .btn-secondary:hover { background: #7f8c8d; }
        .btn-danger { background: #e74c3c; color: #fff; }
        .btn-danger:hover { background: #c0392b; }
        
        .settings-tabs { display: flex; gap: 20px; margin-bottom: 30px; }
        .tab-btn { padding: 10px 20px; background: #fff; border: 2px solid #ddd; border-radius: 5px; text-decoration: none; color: #2c3e50; transition: all 0.3s; }
        .tab-btn.active { background: #3498db; color: #fff; border-color: #3498db; }
        .tab-btn:hover { border-color: #3498db; }
        
        .color-preview { width: 40px; height: 40px; border-radius: 5px; border: 2px solid #ddd; display: inline-block; margin-left: 10px; }
        
        .flash-messages { margin-bottom: 20px; }
        .flash-message { padding: 15px; border-radius: 5px; margin-bottom: 10px; }
        .flash-success { background: #d5f4e6; color: #27ae60; border: 1px solid #27ae60; }
        .flash-error { background: #fadbd8; color: #e74c3c; border: 1px solid #e74c3c; }
        
        .navigation-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border: 1px solid #ecf0f1; border-radius: 5px; margin-bottom: 10px; background: #f8f9fa; }
        .nav-info { flex: 1; }
        .nav-title { font-weight: 600; color: #2c3e50; }
        .nav-url { color: #7f8c8d; font-size: 0.9em; }
        .nav-actions { display: flex; gap: 10px; }
        .nav-btn { padding: 5px 10px; border: none; border-radius: 3px; font-size: 0.8em; cursor: pointer; }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">SHAKTI</div>
        <div class="admin-title">Admin Panel - Site Settings</div>
        <a href="{{ url_for('admin_logout') }}" class="logout-btn">
            <i class="fas fa-sign-out-alt"></i> Logout
        </a>
    </div>
    
    <div class="nav-bar">
        <div class="nav-menu">
            <a href="{{ url_for('admin_dashboard') }}">Dashboard</a>
            <a href="{{ url_for('admin_about') }}">About Page</a>
            <a href="{{ url_for('admin_home') }}">Home Page</a>
            <a href="{{ url_for('admin_contact') }}">Contact Page</a>
            <a href="{{ url_for('admin_gallery') }}">Gallery</a>
            <a href="{{ url_for('admin_settings') }}" class="active">Site Settings</a>
            <a href="/">View Website</a>
        </div>
    </div>
    
    <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash-message flash-{{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        
        <h1 class="page-title">
            <i class="fas fa-cog"></i> Site Settings
        </h1>
        
        <div class="settings-tabs">
            <a href="#general" class="tab-btn active" onclick="showTab('general')">
                <i class="fas fa-globe"></i> General
            </a>
            <a href="#appearance" class="tab-btn" onclick="showTab('appearance')">
                <i class="fas fa-palette"></i> Appearance
            </a>
            <a href="#navigation" class="tab-btn" onclick="showTab('navigation')">
                <i class="fas fa-bars"></i> Navigation
            </a>
            <a href="#social" class="tab-btn" onclick="showTab('social')">
                <i class="fas fa-share-alt"></i> Social Media
            </a>
        </div>
        
        <div class="settings-grid">
            <!-- General Settings -->
            <div id="general-tab" class="settings-section">
                <div class="section-header">
                    <div class="section-title">General Settings</div>
                    <div class="section-description">Basic site information and configuration</div>
                </div>
                <div class="section-content">
                    <form action="{{ url_for('admin_update_general_settings') }}" method="POST">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="site_title">Site Title</label>
                                <input type="text" id="site_title" name="site_title" 
                                       value="{{ settings.site_title if settings else 'AP Women Safety' }}">
                                <div class="help-text">Appears in browser title and header</div>
                            </div>
                            <div class="form-group">
                                <label for="site_tagline">Site Tagline</label>
                                <input type="text" id="site_tagline" name="site_tagline" 
                                       value="{{ settings.site_tagline if settings else 'Empowering Women Across Andhra Pradesh' }}">
                                <div class="help-text">Short description of your organization</div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="site_description">Site Description</label>
                            <textarea id="site_description" name="site_description">{{ settings.site_description if settings else 'Our mission is to ensure the safety and empowerment of women across Andhra Pradesh through comprehensive programs and initiatives.' }}</textarea>
                            <div class="help-text">Used for search engines and social media</div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="admin_email">Admin Email</label>
                                <input type="email" id="admin_email" name="admin_email" 
                                       value="{{ settings.admin_email if settings else 'admin@apwomensafety.org' }}">
                                <div class="help-text">Primary contact email</div>
                            </div>
                            <div class="form-group">
                                <label for="site_logo">Logo URL</label>
                                <input type="url" id="site_logo" name="site_logo" 
                                       value="{{ settings.site_logo if settings else '' }}">
                                <div class="help-text">URL to your organization's logo</div>
                            </div>
                        </div>
                        
                        <div class="checkbox-group">
                            <input type="checkbox" id="maintenance_mode" name="maintenance_mode" 
                                   {{ 'checked' if settings and settings.maintenance_mode else '' }}>
                            <label for="maintenance_mode">Maintenance Mode</label>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save General Settings
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- Appearance Settings -->
            <div id="appearance-tab" class="settings-section" style="display: none;">
                <div class="section-header">
                    <div class="section-title">Appearance Settings</div>
                    <div class="section-description">Customize the look and feel of your website</div>
                </div>
                <div class="section-content">
                    <form action="{{ url_for('admin_update_appearance_settings') }}" method="POST">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="primary_color">Primary Color</label>
                                <input type="color" id="primary_color" name="primary_color" 
                                       value="{{ settings.primary_color if settings else '#1e3c72' }}">
                                <div class="help-text">Main brand color for headers and buttons</div>
                            </div>
                            <div class="form-group">
                                <label for="secondary_color">Secondary Color</label>
                                <input type="color" id="secondary_color" name="secondary_color" 
                                       value="{{ settings.secondary_color if settings else '#20b2aa' }}">
                                <div class="help-text">Secondary accent color</div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="font_family">Font Family</label>
                                <select id="font_family" name="font_family">
                                    <option value="Arial" {{ 'selected' if settings and settings.font_family == 'Arial' else '' }}>Arial</option>
                                    <option value="Helvetica" {{ 'selected' if settings and settings.font_family == 'Helvetica' else '' }}>Helvetica</option>
                                    <option value="Georgia" {{ 'selected' if settings and settings.font_family == 'Georgia' else '' }}>Georgia</option>
                                    <option value="Times New Roman" {{ 'selected' if settings and settings.font_family == 'Times New Roman' else '' }}>Times New Roman</option>
                                </select>
                                <div class="help-text">Primary font for website text</div>
                            </div>
                            <div class="form-group">
                                <label for="header_style">Header Style</label>
                                <select id="header_style" name="header_style">
                                    <option value="gradient" {{ 'selected' if settings and settings.header_style == 'gradient' else '' }}>Gradient</option>
                                    <option value="solid" {{ 'selected' if settings and settings.header_style == 'solid' else '' }}>Solid Color</option>
                                    <option value="image" {{ 'selected' if settings and settings.header_style == 'image' else '' }}>Background Image</option>
                                </select>
                                <div class="help-text">Style for the main header</div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="custom_css">Custom CSS</label>
                            <textarea id="custom_css" name="custom_css" style="height: 200px; font-family: monospace;">{{ settings.custom_css if settings else '' }}</textarea>
                            <div class="help-text">Add custom CSS to override default styles</div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Appearance Settings
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- Navigation Settings -->
            <div id="navigation-tab" class="settings-section" style="display: none;">
                <div class="section-header">
                    <div class="section-title">Navigation Menu</div>
                    <div class="section-description">Manage website navigation structure</div>
                </div>
                <div class="section-content">
                    <div style="margin-bottom: 20px;">
                        <button type="button" class="btn btn-primary" onclick="addNavItem()">
                            <i class="fas fa-plus"></i> Add Menu Item
                        </button>
                    </div>
                    
                    <div id="navigation-items">
                        {% if navigation_menu %}
                            {% for item in navigation_menu %}
                            <div class="navigation-item">
                                <div class="nav-info">
                                    <div class="nav-title">{{ item[1] }}</div>
                                    <div class="nav-url">{{ item[2] }}</div>
                                </div>
                                <div class="nav-actions">
                                    <button class="nav-btn btn-primary" onclick="editNavItem('{{ item[0] }}')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="nav-btn btn-danger" onclick="deleteNavItem('{{ item[0] }}')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <p style="text-align: center; color: #7f8c8d; padding: 40px;">
                                No navigation items configured. Add menu items to get started.
                            </p>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- Social Media Settings -->
            <div id="social-tab" class="settings-section" style="display: none;">
                <div class="section-header">
                    <div class="section-title">Social Media Links</div>
                    <div class="section-description">Configure social media presence</div>
                </div>
                <div class="section-content">
                    <form action="{{ url_for('admin_update_social_settings') }}" method="POST">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="facebook_url">Facebook URL</label>
                                <input type="url" id="facebook_url" name="facebook_url" 
                                       value="{{ settings.facebook_url if settings else '' }}">
                                <div class="help-text">Your Facebook page URL</div>
                            </div>
                            <div class="form-group">
                                <label for="twitter_url">Twitter URL</label>
                                <input type="url" id="twitter_url" name="twitter_url" 
                                       value="{{ settings.twitter_url if settings else '' }}">
                                <div class="help-text">Your Twitter profile URL</div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="instagram_url">Instagram URL</label>
                                <input type="url" id="instagram_url" name="instagram_url" 
                                       value="{{ settings.instagram_url if settings else '' }}">
                                <div class="help-text">Your Instagram profile URL</div>
                            </div>
                            <div class="form-group">
                                <label for="youtube_url">YouTube URL</label>
                                <input type="url" id="youtube_url" name="youtube_url" 
                                       value="{{ settings.youtube_url if settings else '' }}">
                                <div class="help-text">Your YouTube channel URL</div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="linkedin_url">LinkedIn URL</label>
                                <input type="url" id="linkedin_url" name="linkedin_url" 
                                       value="{{ settings.linkedin_url if settings else '' }}">
                                <div class="help-text">Your LinkedIn profile URL</div>
                            </div>
                            <div class="form-group">
                                <label for="whatsapp_number">WhatsApp Number</label>
                                <input type="tel" id="whatsapp_number" name="whatsapp_number" 
                                       value="{{ settings.whatsapp_number if settings else '' }}">
                                <div class="help-text">WhatsApp number for quick contact</div>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Social Media Settings
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function showTab(tabName) {
            // Hide all tabs
            const tabs = ['general', 'appearance', 'navigation', 'social'];
            tabs.forEach(tab => {
                document.getElementById(tab + '-tab').style.display = 'none';
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').style.display = 'block';
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }
        
        function addNavItem() {
            // Implementation for adding navigation items
            alert('Add navigation item functionality would be implemented here');
        }
        
        function editNavItem(id) {
            // Implementation for editing navigation items
            alert('Edit navigation item ' + id + ' functionality would be implemented here');
        }
        
        function deleteNavItem(id) {
            if (confirm('Are you sure you want to delete this navigation item?')) {
                // Implementation for deleting navigation items
                alert('Delete navigation item ' + id + ' functionality would be implemented here');
            }
        }
    </script>
</body>
</html>
